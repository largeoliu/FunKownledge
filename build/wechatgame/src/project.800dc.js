require=function e(t,n,o){function i(s,r){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!r&&a)return a(s,!0);if(c)return c(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};t[s][0].call(u.exports,function(e){var n=t[s][1][e];return i(n||e)},u,u.exports,e,t,n,o)}return n[s].exports}for(var c="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({AnswerNode:[function(e,t,n){"use strict";cc._RF.push(t,"be07dJ5Ih5KJIKp5t5Low1W","AnswerNode");var o={NORMAL:0,ACTIVE:1,OVER:2};cc.Class({extends:cc.Component,properties:{_originPosition:null,_state:o.NORMAL,index:cc.Integer,root:cc.Node,spr:cc.Sprite},onLoad:function(){this._originPosition=this.node.getPosition()},setSpriteFrame:function(e,t){cc.log("setSpriteFrame: "+e+"  "+t),cc.loader.loadRes(e,cc.SpriteAtlas,function(e,n){var o=n.getSpriteFrame(t);this.spr.getComponent(cc.Sprite).spriteFrame=o}.bind(this))},active:function(){this.node.getComponent(cc.Animation).play("p"),this._state=o.ACTIVE},resume:function(){this.node.setPosition(this._originPosition),this.node.getComponent(cc.Animation).play("normal"),this._state=o.NORMAL},disappear:function(){this.node.setPosition(this._originPosition),this.node.getComponent(cc.Animation).play("out"),this._state=o.OVER},radius:function(){return this.node.getContentSize().width/2},worldPosition:function(){var e=this.root.convertToWorldSpace(this.node.getPosition());return e.x+=this.radius(),e.y+=this.radius(),e},setWorldPosition:function(e){var t=this.root.convertToNodeSpace(e);t.x=t.x-this.radius(),t.y=t.y-this.radius(),this.node.setPosition(t)},tag:function(){return this.index},state:function(){return this._state}}),t.exports.AnswerNodeState=o,cc._RF.pop()},{}],HelloWorld:[function(e,t,n){"use strict";cc._RF.push(t,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label},text:"Hello, World!"},onLoad:function(){this.label.string=this.text},update:function(e){}}),cc._RF.pop()},{}],LevelInfo:[function(e,t,n){"use strict";function o(e,t){this.level=e,this.index=t}cc._RF.push(t,"e649aV9d0FCb4x2Hj9mOAoW","LevelInfo"),t.exports.create=function(e,t){return new o(e,t)},cc._RF.pop()},{}],LevelManager:[function(e,t,n){"use strict";cc._RF.push(t,"15d55/lbQZDX5w2pW9mMwqO","LevelManager");var o=e("LevelInfo"),i=cc.Class({ctor:function(){this._curLevel=1,this._curIndex=1,this.MAX_INDEX=5},next:function(){this._curIndex=this._curIndex%this.MAX_INDEX+1},currentLevel:function(){return o.create(this._curLevel,this._curIndex)},isEnd:function(){return this._curIndex==this.MAX_INDEX}}),c=null;t.exports.getInstance=function(){return null==c&&(c=new i),c},cc._RF.pop()},{LevelInfo:"LevelInfo"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"f9b432dboFB8KWMop6+sn9F","Utils"),t.exports={loadCCB:function(e,t){cc.log("addCCB: "+e),cc.loader.loadRes(e,cc.Prefab,function(e,n){var o=cc.instantiate(n);t(o)})},playMusic:function(e,t){cc.log("playMusic: "+e),cc.audioEngine.play(cc.url.raw(e),t)}},cc._RF.pop()},{}],game:[function(e,t,n){"use strict";cc._RF.push(t,"419747Xp1pJGoa9bA8HPV39","game");var o=e("LevelManager"),i=e("Utils"),c=e("AnswerNode"),s=["CCBFile","CCBFile_1","CCBFile_2"];cc.Class({extends:cc.Component,properties:{MAX_INDEX:3,FULL_MARK:3,_curAnswerCCB:null,_score:0,answerNodes:[cc.Node],animateLayer:{default:null,type:cc.Node},level_text_ccb:cc.Node,level_text_spr:cc.Sprite,menuLayer:cc.Node},onLoad:function(){this.setInputControl(!0)},start:function(){this._newGame(),i.playMusic("resources/Sound/bgm.mp3",!0)},setInputControl:function(e){e?(this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this)):(this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancelled,this))},exitGame:function(){},_distance:function(e,t){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},onTouchBegan:function(e){var t=this.node.convertTouchToNodeSpaceAR(e.touch);cc.log("onTouchBegan: "+t.x+" "+t.y);for(var n=1;n<=this.MAX_INDEX;n++){var o=this._getAnswerNode(n).getComponent("AnswerNode"),s=o.worldPosition();if(cc.log("answer_pos: "+s.x+" "+s.y),cc.log("distance: "+this._distance(s,t)),cc.log("radius: "+o.radius()),this._distance(s,t)<o.radius()&&o.state()==c.AnswerNodeState.NORMAL)return o.active(),this._curAnswerCCB=o,i.playMusic("resources/Sound/btn_p.mp3"),!0}return!1},onTouchMoved:function(e){var t=this.node.convertTouchToNodeSpaceAR(e.touch);null!=this._curAnswerCCB&&this._curAnswerCCB.setWorldPosition(t)},onTouchEnded:function(e){var t=this.node.convertTouchToNodeSpaceAR(e.touch);this._check(t)},onTouchCancelled:function(e){var t=this.node.convertTouchToNodeSpaceAR(e.touch);tnis._check(t)},_check:function(e){if(null!=this._curAnswerCCB){var t=this._getInlaySpr(this._curAnswerCCB.tag()),n=t.getPosition(),o=this.node.convertToWorldSpace(this.animateLayer.getPosition());n.x=n.x+o.x+t.getContentSize().width/2,n.y=n.y+o.y+t.getContentSize().height/2,this._distance(n,e)<t.getContentSize().width/2?(this._onCorrect(),i.playMusic("resources/Sound/btn_right.mp3")):(this._curAnswerCCB.resume(),i.playMusic("resources/Sound/btn_wrong.mp3"))}},_onCorrect:function(){cc.log("_onCorrect");var e=this._getInlaySpr(this._curAnswerCCB.tag());e.getComponent(cc.Animation).play("out"),i.loadCCB("prefab/title_tx",function(t){t.setPosition(cc.p(e.getContentSize().width/2,e.getContentSize().height/2)),t.setAnchorPoint(cc.p(.5,.5)),e.addChild(t)}),this._curAnswerCCB.disappear(),++this._score==this.FULL_MARK&&(this._onSuccess(),this._score=0)},_onSuccess:function(){var e=o.getInstance().currentLevel();i.playMusic("resources/level"+e.level+"/"+e.index+"/level"+e.level+"_"+e.index+".mp3"),this._level_animate_ccb.getComponent(cc.Animation).play("act"),this.level_text_ccb.getComponent(cc.Animation).play("act"),this.menuLayer.active=!0,this.menuLayer.getComponent(cc.Animation).play("in"),o.getInstance().isEnd()&&this.nextBtn.setVisible(!1)},_getAnswerNode:function(e){return this.answerNodes[e-1]},_getInlaySpr:function(e){return cc.find(s[e-1],this._level_animate_ccb)},_newGame:function(){null!=this._level_animate_ccb&&(this._level_animate_ccb.removeFromParent(),this._level_animate_ccb=null),null!=this._level_text_ccb&&(this._level_text_ccb.removeFromParent(),this._level_text_ccb=null,this.menuLayer.animationManager.runAnimationsForSequenceNamed("out"),this.menuLayer.animationManager.setCompletedAnimationCallback(this,function(){this.setInputControl(!0)}));var e=o.getInstance().currentLevel();i.loadCCB(this._level_ccb_name(e),function(e){this._level_animate_ccb=e,this.animateLayer.addChild(this._level_animate_ccb)}.bind(this)),cc.loader.loadRes(this._level_word_spr_name(e),cc.SpriteFrame,function(e,t){this.level_text_spr.getComponent(cc.Sprite).spriteFrame=t}.bind(this));for(var t=1;t<=this.MAX_INDEX;t++)this._getAnswerNode(t).getComponent("AnswerNode").setSpriteFrame("level"+e.level+"/level"+e.level+"_btn","level"+e.level+"_btn"+((e.index-1)*this.MAX_INDEX+t)),this._getAnswerNode(t).getComponent("AnswerNode").resume();cc.sys.localStorage.setItem("level",e.index+"")},onReplay:function(){this.menu.setEnabled(!1),this.setInputControl(!1),this._newGame()},onNext:function(){this.menu.setEnabled(!1),this.setInputControl(MSFIDOCredentialAssertion),o.getInstance().next(),this._newGame()},onClick:function(e){this._level_animate_ccb.getComponent(cc.Animation).play("act")},onExitGame:function(){this.exitGame()},_level_ccb_name:function(e){var t=e.level,n=e.index;return"level"+t+"/"+n+"/level"+t+"_"+n},_level_word_spr_name:function(e){var t=e.level,n=e.index;return"level"+t+"/"+n+"/"+n}}),cc._RF.pop()},{AnswerNode:"AnswerNode",LevelManager:"LevelManager",Utils:"Utils"}]},{},["AnswerNode","HelloWorld","LevelInfo","LevelManager","Utils","game"]);